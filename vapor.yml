id: 65599
name: Taklifa
environments:
    production:
        octane: true
        # octane-database-session-persist: true #
        # octane-database-session-ttl: 20 #
        # warm: 2
        timeout: 25
        memory: 2048
        cli-memory: 512
        tmp-storage: 1024
        cli-tmp-storage: 512
        queue-tmp-storage: 10240
        runtime: 'php-8.4:al2-arm'
        database: taklifa_prod
        cache: taklifa
        storage: taklifa
        domain:
            - admin-old.taklifa.app
            - api-old.taklifa.app
        build:
            - 'composer install --no-dev'
            - 'php artisan cache:clear'
            - 'php artisan event:cache'
            - 'php artisan route:cache'
            - 'php artisan filament:optimize'
            - 'php artisan queue:restart'
        deploy:
            - 'php artisan migrate --force'
    staging:
        memory: 1024
        cli-memory: 512
        tmp-storage: 1024
        cli-tmp-storage: 512
        queue-tmp-storage: 10240
        runtime: 'php-8.3:al2'
        database: taklifa-staging
        storage: taklifa-staging
        # cache: taklifa-staging
        domain:
            - admin-staging.taklifa.app
            - api-staging.taklifa.app
        build:
            - 'composer install --no-dev'
            - 'php artisan migrate --force'
            - 'php artisan event:cache'
